<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tahu Bakso - Pemesanan Online</title>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    <style>
        /* STYLE SAMA PERSIS DENGAN SEBELUMNYA */
        /* ... semua style tetap sama ... */
        :root {
            --primary: #d1b11fd3;
            --secondary: #f4e4c1;
            --accent: #2e8b57;
            --text: #333;
            --light: #fff;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
            color: var(--text);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary);
            color: var(--light);
            padding: 0rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* === RESPONSIVE SCALING LOGO === */
.logo-img{
    height:auto;
    max-width: clamp(55px, 10vw, 130px); /* auto flexible */
    transition: 0.3s ease; /* smooth scaling */
}

/* Mobile kontrol tambahan */
@media(max-width:480px){
    .logo-img{
        max-width: clamp(48px, 12vw, 70px);
    }
}
@media(min-width:1024px){
    .logo-img:hover{
        transform: scale(1.07);
        filter: drop-shadow(0px 2px 6px rgba(0,0,0,0.25));
    }
}


        
        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
        }
        
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--accent);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        /* Tambahan style untuk QRIS */
        .qr-icon {
            cursor: pointer;
            font-size: 1.2rem;
            margin-right: 15px;
            padding: 5px 10px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .qr-icon:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .qr-modal-content {
            max-width: 500px;
            text-align: center;
        }
        
        #qrisImage {
            width: 100%;
            max-width: 300px;
            height: auto;
            margin: 1rem 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            background-color: white;
        }
        
        .copy-button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .copy-button:hover {
            background-color: #246c43;
        }
        
        /* Style untuk header icons */
        .header-icons {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        /* Loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
            font-size: 1.5rem;
            flex-direction: column;
        }
        
        .spinner {
            border: 8px solid #f3f3f3;
            border-top: 8px solid var(--accent);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 20px;
        }
        
        nav ul li a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        nav ul li a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23ff6b35"/></svg>');
            background-size: cover;
            background-position: center;
            color: var(--light);
            text-align: center;
            padding: 4rem 2rem;
            border-radius: 10px;
            margin: 2rem 0;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--accent);
            color: var(--light);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background-color: #246c43;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .btn-primary {
            background-color: var(--primary);
        }
        
        .btn-primary:hover {
            background-color: #e55a2b;
        }
        
        .btn-small {
            padding: 5px 10px;
            font-size: 0.9rem;
        }
        
        .section {
            background-color: var(--light);
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow);
        }
        
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 10px;
        }
        
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 1.5rem;
        }
        
        .menu-item {
            background-color: var(--light);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            border: 1px solid #eee;
        }
        
        .menu-item:hover {
            transform: translateY(-5px);
        }
        
        .menu-img {
            height: 250px;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: var(--primary);
        }

        .menu-image {
            width: 530px; /* Atur lebar gambar */
            height: 250px; /* Atur tinggi gambar */
            object-fit: cover; /* Memastikan gambar mengisi area tanpa distorsi */
        }

        
        .menu-content {
            padding: 1.5rem;
        
        }
        
        .menu-title {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .menu-desc {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            min-height: 60px;
        }
        
        .menu-price {
            font-weight: bold;
            color: var(--accent);
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        
        .menu-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .qty-btn {
            background-color: #f0f0f0;
            border: none;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .qty-input {
            width: 40px;
            height: 30px;
            border: none;
            text-align: center;
            font-size: 1rem;
        }
        
        .order-summary {
            background-color: var(--secondary);
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .order-item-details {
            flex-grow: 1;
        }
        
        .order-item-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .order-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid rgba(0, 0, 0, 0.2);
        }
        
        .cart-empty {
            text-align: center;
            padding: 3rem;
            color: #777;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .admin-section {
            display: none;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: var(--secondary);
            color: var(--primary);
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        footer {
            background-color: var(--primary);
            color: var(--light);
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .footer-links {
            display: flex;
            margin: 1rem 0;
        }
        
        .footer-links a {
            color: var(--light);
            margin: 0 10px;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }
        
        .mix-options {
            margin: 1.5rem 0;
            padding: 1rem;
            background-color: #f9f9f9;
            border-radius: 8px;
        }
        
        .mix-option {
            margin-bottom: 1rem;
            padding: 1rem;
            background-color: white;
            border-radius: 6px;
            border: 1px solid #eee;
        }
        
        .mix-option-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .mix-option-desc {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .mix-option-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .mix-item-control {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding: 0.5rem;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        
        .mix-item-info {
            flex-grow: 1;
        }
        
        .mix-item-quantity {
            display: flex;
            align-items: center;
            gap: 5px;
            margin: 0 1rem;
        }
        
        .mix-item-processing {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .processing-select {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .mix-option-total {
            font-weight: bold;
            color: var(--accent);
        }
        
        .admin-tabs {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
            position: relative;
        }
        
        .admin-tab.active {
            color: var(--primary);
            font-weight: 600;
        }
        
        .admin-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary);
        }
        
        .admin-tab-content {
            display: none;
        }
        
        .admin-tab-content.active {
            display: block;
        }
        
        .login-form {
            max-width: 400px;
            margin: 0 auto;
            padding: 2rem;
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        
        .login-title {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .cart-edit-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 5px;
        }
        
        .cart-edit-qty {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .cart-edit-select {
            padding: 3px 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 0.9rem;
        }
        
        .date-filter-container {
            display: flex;
            gap: 15px;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            align-items: center;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .date-filter-group {
            display: flex;
            flex-direction: column;
            min-width: 180px;
        }
        
        .date-filter-label {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent);
        }
        
        .date-filter-input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .settings-container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        .settings-form {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .current-credentials {
            background-color: #e9f7ef;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        
        .summary-card {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--accent);
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 1rem;
        }
        
        .stat-item {
            background-color: white;
            padding: 1rem;
            border-radius: 6px;
            border: 1px solid #eee;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
        }
        
        .revenue-summary {
            background-color: #e9f7ef;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
            border: 1px solid #c3e6cb;
        }
        
        .customer-card {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #eee;
        }
        
        .customer-card h4 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .customer-orders-details {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1rem;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            nav ul li {
                margin: 5px 10px;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .menu-controls {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .modal-content {
                width: 95%;
                padding: 1.5rem;
            }
            
            .mix-item-control {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .mix-item-quantity, .mix-item-processing {
                margin: 0;
                width: 100%;
                justify-content: space-between;
            }
            
            .admin-tabs {
                flex-direction: column;
            }
            
            .admin-tab {
                text-align: left;
                border-bottom: 1px solid #eee;
            }
            
            .cart-edit-controls {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .date-filter-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .date-filter-group {
                width: 100%;
            }
            
            .summary-stats {
                grid-template-columns: 1fr;
            }
            
            .header-icons {
                margin-top: 1rem;
            }
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-pending {
            background-color: #ffc107;
            color: #333;
        }
        
        .status-processing {
            background-color: #17a2b8;
            color: white;
        }
        
        .status-completed {
            background-color: #28a745;
            color: white;
        }
        
        .status-cancelled {
            background-color: #dc3545;
            color: white;
        }
        
        .order-actions {
            display: flex;
            gap: 5px;
        }
        
        .status-select {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 0.9rem;
        }
         /* CSS untuk mengatur tampilan logo */
    .header-content {
        background-color: var(--primary);
        color: var(--light);
        padding: 1.5rem 0;
        box-shadow: var(--shadow);
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .logo img {
        max-width: 100px; /* Sesuaikan lebar maksimum gambar */
        height: auto; /* Biarkan tinggi menyesuaikan secara otomatis */
        vertical-align: middle; /* Pusatkan gambar secara vertikal */
    }
    
    /* Default Desktop View */
.hamburger { display:none; }
.nav-menu ul { display:flex; gap:20px; }

/* --- MOBILE MODE --- */
@media (max-width: 768px) {
    .header-content{
        display:flex;
        justify-content:space-between;
        align-items:center;
        padding:10px 15px;
    }

    .logo img { max-width:60px; }

    .hamburger {
        display:block;
        font-size:28px;
        cursor:pointer;
        padding:5px 10px;
        user-select:none;
    }

    /* Nav disembunyikan awalnya */
    .nav-menu {
        display:none;
        position:absolute;
        top:60px;
        right:0;
        width:200px;
        background:#000;
        padding:15px;
        border-radius:10px 0 0 10px;
        z-index:999;
    }

    .nav-menu.active { display:block; }

    .nav-menu ul{
        display:block;
    }

    .nav-menu ul li{
        margin:12px 0;
    }

    .nav-menu ul li a{
        color:#fff;
        font-size:1rem;
        padding:6px 0;
        display:block;
    }
}

/* DESKTOP tetap normal */
.header-row{
    display:flex;
    justify-content:space-between;
    align-items:center;
}

/* MOBILE STYLE */
@media(max-width:768px){

    header{ padding:10px; }

    .header-row{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
    }

    .logo-img{
        width:55px;
    }

    .hamburger{
        font-size:28px;
        cursor:pointer;
        padding:5px 10px;
        user-select:none;
    }

    .right-group{
        display:flex;
        align-items:center;
        gap:12px;
        font-size:20px;
    }

    .qr-icon{ font-size:18px; }
    .cart-icon{ font-size:20px; }

    /* NAV dropdown saat hamburger diklik */
    .nav-menu{
        display:none;
        background:#000;
        padding:15px;
    }
    .nav-menu.active{ display:block; }
    .nav-menu ul li{ margin:12px 0; }
    .nav-menu ul a{ color:#fff; display:block; }

    /*kode baru
    /* ================= MOBILE ================= */
@media(max-width: 768px){

    /* HIDE MENU DESKTOP SAAT MOBILE */
    .nav-desktop{
        display:none !important;
    }

    /* Tampilkan menu hamburger */
    .hamburger{
        display:block;
    }
}

}
/* ================== DESKTOP VIEW ================== */
@media(min-width: 769px){

    .header-row{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:25px;
        padding:12px 5px;
    }

    /* NAV DESKTOP TENGAH */
    .nav-desktop{
        display:flex;
        flex-grow:1;
        justify-content:center; /* teks Berada Menu Keranjang Admin berada di tengah */
    }
    .nav-desktop ul{
        display:flex;
        gap:30px; /* jarak proporsional antar item menu */
        list-style:none;
    }
    .nav-desktop a{
        font-size:1.05rem;
        font-weight:500;
        color:white;
        padding:6px 4px;
        transition:0.2s;
    }
    .nav-desktop a:hover{
        opacity:0.7;
    }

    /* QRIS + IKON KERANJANG SEBELAH KANAN */
    .right-group{
        display:flex;
        align-items:center;
        gap:18px;
        font-size:20px;
        margin-right:20px; /* ðŸ”¥ geser keranjang dari sisi kanan */
    }

    /* HAMBURGER DISABLE DI DESKTOP */
    .hamburger{ display:none; }

    /* LOGO RESPONSIVE SCALE (dari perintah sebelumnya tetap dipakai) */
    .logo-img{
        max-width: clamp(80px, 7vw, 130px);
        height:auto;
        margin-left:20px; /* ðŸ”¥ geser logo ke kanan */
    }

    /* Sembunyikan menu mobile di desktop */
    .nav-menu{ display:none !important; }
}


    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <div id="loadingText">Loading...</div>
    </div>

    <!-- HEADER DAN SEMUA ELEMENT HTML LAINNYA SAMA -->
    <!-- ... semua HTML tetap sama ... -->
    <header>
    <div class="container header-row">

        <!-- KIRI -->
        <div class="left-group">
            <img src="logo_HF.png" class="logo-img">
        </div>

        <!-- MENU NAV (TAMPIL DI DESKTOP) -->
        <nav class="nav-desktop">
            <ul>
                <li><a class="nav-link" data-target="home">Beranda</a></li>
                <li><a class="nav-link" data-target="menu">Menu</a></li>
                <li><a class="nav-link" data-target="cart">Keranjang</a></li>
                <li><a class="nav-link" data-target="admin">Admin</a></li>
            </ul>
        </nav>

        <!-- KANAN -->
        <div class="right-group">
            <div class="qr-icon" id="qrisIcon">ðŸ’³</div>
            <div class="cart-icon" id="cartIcon">ðŸ›’<span class="cart-count" id="cartCount">0</span></div>
        </div>

        <!-- HAMBURGER (MUNCUL HANYA MOBILE) -->
        <div id="hamburgerMenu" class="hamburger">â˜°</div>

    </div>

    <!-- MENU MOBILE DROP -->
    <nav id="mobileNav" class="nav-menu">
        <ul>
            <li><a class="nav-link" data-target="home">Beranda</a></li>
            <li><a class="nav-link" data-target="menu">Menu</a></li>
            <li><a class="nav-link" data-target="cart">Keranjang</a></li>
            <li><a class="nav-link" data-target="admin">Admin</a></li>
        </ul>
    </nav>
</header>




    <div class="container">
        <!-- Home Section -->
        <section id="home" class="section">
            <div class="hero">
                <h1>Tahu Bakso Lezat, Siap Antar</h1>
                <p>Pesan tahu bakso favorit Anda dengan mudah melalui aplikasi kami. Tambah ke keranjang, checkout, dan kami akan mengirimkannya ke WhatsApp penjual.</p>
                <a href="#" class="btn nav-link" data-target="menu">Lihat Menu</a>
            </div>
            
            <div class="features">
                <h2 class="section-title">Kenapa Pesan di Sini?</h2>
                <div class="menu-grid">
                    <div class="menu-item">
                        <div class="menu-img">ðŸ›’</div>
                        <div class="menu-content">
                            <h3 class="menu-title">Keranjang Belanja</h3>
                            <p class="menu-desc">Tambahkan berbagai item ke keranjang sebelum checkout.</p>
                        </div>
                    </div>
                    <div class="menu-item">
                        <div class="menu-img">ðŸ’¬</div>
                        <div class="menu-content">
                            <h3 class="menu-title">Kirim ke WhatsApp</h3>
                            <p class="menu-desc">Pesanan langsung dikirim ke WhatsApp penjual untuk proses cepat.</p>
                        </div>
                    </div>
                    <div class="menu-item">
                        <div class="menu-img">ðŸ“Š</div>
                        <div class="menu-content">
                            <h3 class="menu-title">Rekapan Otomatis</h3>
                            <p class="menu-desc">Penjual dapat melihat rekapan pesanan dengan mudah.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Menu Section -->
        <section id="menu" class="section" style="display: none;">
            <h2 class="section-title">Menu Tahu Bakso</h2>
            
            <div class="menu-category">
                <h3 style="color: var(--accent); margin-bottom: 1rem;">Paket Mix</h3>
                <div class="menu-grid">
                    <div class="menu-item">
                        <div class="menu-img"><img src="mix_11.jpeg" alt="mix_1" class="menu-image"></div>
                        <div class="menu-content">
                            <h3 class="menu-title">Mix 1</h3>
                            <p class="menu-desc">Per paket: 2 pcs keju (wajib) + 8 pcs lainnya (pilih sendiri komposisinya).</p>
                            <div class="menu-price">Rp 30.000 / paket</div>
                            <div class="menu-controls">
                                <button class="btn btn-small open-mix1-modal">Pilih Komposisi</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="menu-item">
                        <div class="menu-img"><img src="mix_2.jpeg" alt="mix2" class="menu-image"></div>
                        <div class="menu-content">
                            <h3 class="menu-title">Mix 2</h3>
                            <p class="menu-desc">10 pcs random campuran (original/sosis/rawit) tanpa keju.</p>
                            <div class="menu-price">Rp 28.000 / paket</div>
                            <div class="menu-controls">
                                <button class="btn btn-small open-mix2-modal">Pilih Komposisi</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="menu-category" style="margin-top: 2rem;">
                <h3 style="color: var(--accent); margin-bottom: 1rem;">Per Pcs</h3>
                <div class="menu-grid">
                    <div class="menu-item">
                        <div class="menu-img"><img src="keju.jpg" alt="keju" class="menu-image"></div>
                        <div class="menu-content">
                            <h3 class="menu-title">Tahu Bakso Keju</h3>
                            <p class="menu-desc">Tahu bakso dengan isian keju yang umami.</p>
                            <div class="menu-price">Rp 3.500 / pcs</div>
                            <div class="menu-controls">
                                <button class="btn btn-small open-single-modal" data-id="keju" data-name="Tahu Bakso Keju" data-price="3500">Pesan</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="menu-item">
                        <div class="menu-img"><img src="ori1.jpeg" alt="ori1" class="menu-image"></div>
                        <div class="menu-content">
                            <h3 class="menu-title">Tahu Bakso Original</h3>
                            <p class="menu-desc">Tahu bakso original dengan isian daging ayam pilihan.</p>
                            <div class="menu-price">Rp 3.000 / pcs</div>
                            <div class="menu-controls">
                                <button class="btn btn-small open-single-modal" data-id="original" data-name="Tahu Bakso Original" data-price="3000">Pesan</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="menu-item">
                        <div class="menu-img"><img src="sosis.jpg" alt="sosis" class="menu-image"></div>
                        <div class="menu-content">
                            <h3 class="menu-title">Tahu Bakso Sosis</h3>
                            <p class="menu-desc">Tahu bakso dengan isian sosis sapi yang gurih.</p>
                            <div class="menu-price">Rp 3.000 / pcs</div>
                            <div class="menu-controls">
                                <button class="btn btn-small open-single-modal" data-id="sosis" data-name="Tahu Bakso Sosis" data-price="3000">Pesan</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="menu-item">
                        <div class="menu-img"><img src="cabe1.jpeg" alt="cabe1" class="menu-image"></div>
                        <div class="menu-content">
                            <h3 class="menu-title">Tahu Bakso Rawit</h3>
                            <p class="menu-desc">Tahu bakso dengan isian cabai rawit untuk yang suka pedas.</p>
                            <div class="menu-price">Rp 3.000 / pcs</div>
                            <div class="menu-controls">
                                <button class="btn btn-small open-single-modal" data-id="rawit" data-name="Tahu Bakso Rawit" data-price="3000">Pesan</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cart Section -->
        <section id="cart" class="section" style="display: none;">
            <h2 class="section-title">Keranjang Belanja</h2>
            
            <div id="cartItems">
                <div class="cart-empty">
                    <p>Keranjang belanja Anda masih kosong.</p>
                    <a href="#" class="btn nav-link" data-target="menu" style="margin-top: 1rem;">Lihat Menu</a>
                </div>
            </div>
            
            <div id="cartSummary" style="display: none;">
                <div class="order-summary">
                    <h3>Ringkasan Pesanan</h3>
                    <div id="cartSummaryItems"></div>
                    <div class="order-total">
                        <span>Total:</span>
                        <span id="cartTotal">Rp 0</span>
                    </div>
                </div>
                
                <button id="checkoutBtn" class="btn btn-primary" style="width: 100%; margin-top: 1.5rem;">
                    Lanjutkan ke Checkout
                </button>
            </div>
        </section>

        <!-- Admin Section -->
        <section id="admin" class="section admin-section" style="display: none;">
            <div id="adminLogin" style="display: block;">
                <div class="login-form">
                    <h2 class="login-title">Login Admin</h2>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="adminUsername">Username</label>
                            <input type="text" id="adminUsername" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="adminPassword">Password</label>
                            <input type="password" id="adminPassword" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">
                            Login
                        </button>
                    </form>
                </div>
            </div>
            
            <div id="adminContent" style="display: none;">
                <h2 class="section-title">Admin Dashboard</h2>
                
                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="orders">Daftar Pesanan</button>
                    <button class="admin-tab" data-tab="production">Rekapan Produksi</button>
                    <button class="admin-tab" data-tab="revenue">Rekapan Pendapatan</button>
                    <button class="admin-tab" data-tab="customer-orders">Rekapan Pesanan Customer</button>
                    <button class="admin-tab" data-tab="qris">Pengaturan QRIS</button>
                    <button class="admin-tab" data-tab="settings">Pengaturan Akun</button>
                    <button id="logoutBtn" class="btn btn-small" style="margin-left: auto; background-color: #dc3545; color: white;">Logout</button>
                </div>
                
                <!-- Tab Daftar Pesanan -->
                <div id="ordersTab" class="admin-tab-content active">
                    <div style="margin-bottom: 1.5rem;">
                        <button id="refreshOrders" class="btn">Refresh Data</button>
                        <button id="clearOrders" class="btn" style="background-color: #dc3545; margin-left: 10px;">Hapus Semua Data</button>
                        <button id="exportOrders" class="btn" style="background-color: #17a2b8; margin-left: 10px;">Ekspor Data</button>
                    </div>
                    <table id="ordersTable">
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Nama</th>
                                <th>No. WhatsApp</th>
                                <th>Pesanan</th>
                                <th>Jumlah</th>
                                <th>Total</th>
                                <th>Waktu</th>
                                <th>Status</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody"></tbody>
                    </table>
                    <div id="noOrders" style="text-align: center; padding: 2rem; display: none;">
                        <p>Belum ada pesanan.</p>
                    </div>
                </div>
                
                <!-- Tab Rekapan Produksi -->
                <div id="productionTab" class="admin-tab-content">
                    <div style="margin-bottom: 1.5rem;">
                        <button id="refreshProduction" class="btn">Refresh Rekapan</button>
                        <button id="printProduction" class="btn" style="background-color: #28a745; margin-left: 10px;">Cetak Rekapan</button>
                    </div>
                    
                    <!-- Filter Tanggal -->
                    <div class="date-filter-container">
                        <div class="date-filter-group">
                            <label class="date-filter-label" for="startDate">Dari Tanggal:</label>
                            <input type="date" id="startDate" class="date-filter-input">
                        </div>
                        <div class="date-filter-group">
                            <label class="date-filter-label" for="endDate">Sampai Tanggal:</label>
                            <input type="date" id="endDate" class="date-filter-input">
                        </div>
                        <div style="display: flex; gap: 10px; align-items: flex-end;">
                            <button id="applyDateFilter" class="btn">Filter Tanggal</button>
                            <button id="clearDateFilter" class="btn" style="background-color: #6c757d;">Reset Filter</button>
                        </div>
                    </div>
                    
                    <!-- Ringkasan Total Produksi -->
                    <div class="summary-card">
                        <h4>Total Produksi</h4>
                        <div class="summary-stats">
                            <div class="stat-item">
                                <div class="stat-label">Total Semua Jenis</div>
                                <div class="stat-value" id="totalAllProduction">0 pcs</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Total Keju</div>
                                <div class="stat-value" id="totalKejuProduction">0 pcs</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Total Original</div>
                                <div class="stat-value" id="totalOriginalProduction">0 pcs</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Total Sosis</div>
                                <div class="stat-value" id="totalSosisProduction">0 pcs</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Total Rawit</div>
                                <div class="stat-value" id="totalRawitProduction">0 pcs</div>
                            </div>
                        </div>
                    </div>
                    
                    <h3 style="margin-bottom: 1rem; color: var(--accent);">Detail Produksi per Jenis</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Jenis Tahu Bakso</th>
                                <th>Kukus</th>
                                <th>Goreng</th>
                                <th>Frozen</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody id="productionSummary"></tbody>
                        <tfoot>
                            <tr id="productionTotalRow" style="display: none;">
                                <td><strong>TOTAL SEMUA</strong></td>
                                <td><strong id="totalKukus">0 pcs</strong></td>
                                <td><strong id="totalGoreng">0 pcs</strong></td>
                                <td><strong id="totalFrozen">0 pcs</strong></td>
                                <td><strong id="grandTotal">0 pcs</strong></td>
                            </tr>
                        </tfoot>
                    </table>
                    
                    <h3 style="margin-top: 2rem; margin-bottom: 1rem; color: var(--accent);">Detail Produksi per Hari</h3>
                    <div id="productionDetails"></div>
                </div>
                
                <!-- Tab Rekapan Pendapatan -->
                <div id="revenueTab" class="admin-tab-content">
                    <div style="margin-bottom: 1.5rem;">
                        <button id="refreshRevenue" class="btn">Refresh Data</button>
                        <button id="printRevenue" class="btn" style="background-color: #28a745; margin-left: 10px;">Cetak Laporan</button>
                    </div>
                    
                    <!-- Filter Tanggal untuk Pendapatan -->
                    <div class="date-filter-container">
                        <div class="date-filter-group">
                            <label class="date-filter-label" for="revenueStartDate">Dari Tanggal:</label>
                            <input type="date" id="revenueStartDate" class="date-filter-input">
                        </div>
                        <div class="date-filter-group">
                            <label class="date-filter-label" for="revenueEndDate">Sampai Tanggal:</label>
                            <input type="date" id="revenueEndDate" class="date-filter-input">
                        </div>
                        <div style="display: flex; gap: 10px; align-items: flex-end;">
                            <button id="applyRevenueFilter" class="btn">Filter Tanggal</button>
                            <button id="clearRevenueFilter" class="btn" style="background-color: #6c757d;">Reset Filter</button>
                        </div>
                    </div>
                    
                    <!-- Ringkasan Pendapatan -->
                    <div class="summary-card">
                        <h4>Ringkasan Pendapatan</h4>
                        <div class="summary-stats">
                            <div class="stat-item">
                                <div class="stat-label">Total Pendapatan</div>
                                <div class="stat-value" id="totalRevenue">Rp 0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Jumlah Transaksi</div>
                                <div class="stat-value" id="totalTransactions">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Rata-rata per Transaksi</div>
                                <div class="stat-value" id="averageTransaction">Rp 0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Total Item Terjual</div>
                                <div class="stat-value" id="totalItemsSold">0 pcs</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tabel Detail Transaksi -->
                    <h3 style="margin-bottom: 1rem; color: var(--accent);">Detail Transaksi per Customer</h3>
                    <table id="revenueTable">
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Nama Customer</th>
                                <th>No. WhatsApp</th>
                                <th>Tanggal Pesan</th>
                                <th>Jumlah Item</th>
                                <th>Total Bayar</th>
                            </tr>
                        </thead>
                        <tbody id="revenueTableBody"></tbody>
                    </table>
                    <div id="noRevenue" style="text-align: center; padding: 2rem; display: none;">
                        <p>Belum ada transaksi dalam periode ini.</p>
                    </div>
                    
                    <!-- Ringkasan Harian -->
                    <div class="revenue-summary">
                        <h4 style="color: var(--accent); margin-bottom: 1rem;">Ringkasan Pendapatan Harian</h4>
                        <div id="dailyRevenueSummary"></div>
                    </div>
                </div>
                
                <!-- Tab Rekapan Pesanan Customer -->
                <div id="customer-ordersTab" class="admin-tab-content">
                    <div style="margin-bottom: 1.5rem;">
                        <button id="refreshCustomerOrders" class="btn">Refresh Data</button>
                        <button id="exportCustomerOrders" class="btn" style="background-color: #17a2b8; margin-left: 10px;">Ekspor Data</button>
                    </div>
                    
                    <!-- Filter Tanggal untuk Pesanan Customer -->
                    <div class="date-filter-container">
                        <div class="date-filter-group">
                            <label class="date-filter-label" for="customerStartDate">Dari Tanggal:</label>
                            <input type="date" id="customerStartDate" class="date-filter-input">
                        </div>
                        <div class="date-filter-group">
                            <label class="date-filter-label" for="customerEndDate">Sampai Tanggal:</label>
                            <input type="date" id="customerEndDate" class="date-filter-input">
                        </div>
                        <div style="display: flex; gap: 10px; align-items: flex-end;">
                            <button id="applyCustomerFilter" class="btn">Filter Tanggal</button>
                            <button id="clearCustomerFilter" class="btn" style="background-color: #6c757d;">Reset Filter</button>
                        </div>
                    </div>
                    
                    <!-- Ringkasan Statistik -->
                    <div class="summary-card">
                        <h4>Statistik Pesanan Customer</h4>
                        <div class="summary-stats">
                            <div class="stat-item">
                                <div class="stat-label">Jumlah Customer</div>
                                <div class="stat-value" id="totalCustomers">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Total Pesanan</div>
                                <div class="stat-value" id="totalCustomerOrders">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Total Item</div>
                                <div class="stat-value" id="totalCustomerItems">0 pcs</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Total Pendapatan</div>
                                <div class="stat-value" id="totalCustomerRevenue">Rp 0</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tabel Detail Pesanan Customer -->
                    <h3 style="margin-bottom: 1rem; color: var(--accent);">Detail Pesanan per Customer</h3>
                    <div id="customerOrdersList"></div>
                </div>
                
                <!-- Tab Pengaturan QRIS -->
                <div id="qrisTab" class="admin-tab-content">
                    <div class="settings-container">
                        <h3 style="margin-bottom: 1.5rem; color: var(--accent);">Pengaturan QRIS & Rekening</h3>
                        
                        <div class="settings-form">
                            <h4 style="margin-bottom: 1rem; color: var(--primary);">QRIS Code</h4>
                            <div class="form-group">
                                <label for="qrisImageUrl">URL Gambar QRIS</label>
                                <input type="text" id="qrisImageUrl" class="form-control" placeholder="Masukkan URL gambar QRIS">
                                <small style="color: #666; font-size: 0.9rem;">Unggah gambar QRIS ke layanan hosting gambar (seperti imgbb, imgur), lalu masukkan URL-nya di sini.</small>
                            </div>
                            
                            <div id="qrisPreview" style="margin-top: 1rem; text-align: center; display: none">
                                <p>Preview QRIS:</p>
                                <img id="previewQrisImage" src="" alt="Preview QRIS" style="max-width: 200px; max-height: 200px; border: 1px solid #ddd; padding: 10px; background-color: white;">
                            </div>
                            
                            <h4 style="margin-top: 2rem; margin-bottom: 1rem; color: var(--primary);">Informasi Rekening Bank</h4>
                            
                            <div class="form-group">
                                <label for="bankName">Nama Bank</label>
                                <input type="text" id="bankName" class="form-control" placeholder="Contoh: BCA, Mandiri, BRI">
                            </div>
                            
                            <div class="form-group">
                                <label for="bankAccountNumber">Nomor Rekening</label>
                                <input type="text" id="bankAccountNumber" class="form-control" placeholder="Masukkan nomor rekening">
                            </div>
                            
                            <div class="form-group">
                                <label for="bankAccountName">Atas Nama</label>
                                <input type="text" id="bankAccountName" class="form-control" placeholder="Nama pemilik rekening">
                            </div>
                            
                            <button id="saveQrisSettings" class="btn btn-primary" style="width: 100%;">
                                Simpan Pengaturan QRIS
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Pengaturan Akun -->
                <div id="settingsTab" class="admin-tab-content">
                    <div class="settings-container">
                        <h3 style="margin-bottom: 1.5rem; color: var(--accent);">Pengaturan Akun Admin</h3>
                        
                        <div class="settings-form">
                            <div class="current-credentials">
                                <h4 style="margin-bottom: 0.5rem; color: var(--primary);">Informasi Akun Saat Ini</h4>
                                <div id="currentUsername"></div>
                                <div style="margin-top: 0.5rem; color: #666;">
                                    Password: â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢
                                </div>
                            </div>
                            
                            <h4 style="margin-bottom: 1rem; color: var(--primary);">Ganti Username & Password</h4>
                            
                            <div class="form-group">
                                <label for="newUsername">Username Baru</label>
                                <input type="text" id="newUsername" class="form-control" placeholder="Masukkan username baru">
                            </div>
                            
                            <div class="form-group">
                                <label for="newPassword">Password Baru</label>
                                <input type="password" id="newPassword" class="form-control" placeholder="Masukkan password baru">
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmPassword">Konfirmasi Password</label>
                                <input type="password" id="confirmPassword" class="form-control" placeholder="Konfirmasi password baru">
                            </div>
                            
                            <button id="saveAdminSettings" class="btn btn-primary" style="width: 100%;">
                                Simpan Perubahan
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal QRIS -->
    <div id="qrisModal" class="modal">
        <div class="modal-content qr-modal-content">
            <span class="close-modal" id="closeQrisModal">&times;</span>
            <h2 class="section-title">Pembayaran QRIS</h2>
            
            <div style="text-align: center; padding: 1rem;">
                <p>Scan QRIS di bawah ini untuk pembayaran:</p>
                
                <!-- Tempat untuk menampilkan QRIS -->
                <div id="qrisImageContainer">
                    <img id="qrisImage" src="" alt="QRIS Code" style="display: none;">
                    <div id="qrisPlaceholder" style="padding: 2rem; background-color: #f5f5f5; border-radius: 8px;">
                        <p>QRIS belum diatur</p>
                        <p style="font-size: 0.9rem; color: #666;">Hubungi admin untuk mengatur QRIS</p>
                    </div>
                </div>
                
                <div style="margin-top: 1.5rem;">
                    <p><strong>Atau gunakan nomor rekening:</strong></p>
                    <div style="background-color: var(--secondary); padding: 1rem; border-radius: 6px; margin-top: 0.5rem;">
                        <p id="bankInfo" style="margin-bottom: 0.5rem;">Bank: -</p>
                        <p id="accountNumber" style="margin-bottom: 0.5rem;">No. Rekening: -</p>
                        <p id="accountName">Atas Nama: -</p>
                        <button class="copy-button" id="copyAccountBtn" style="display: none;">
                            Salin Informasi Rekening
                        </button>
                    </div>
                </div>
                
                <div style="margin-top: 1.5rem; font-size: 0.9rem; color: #666;">
                    <p>Setelah melakukan pembayaran, konfirmasi dengan mengirimkan bukti transfer ke WhatsApp penjual.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Mix 1 -->
    <div id="mix1Modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeMix1Modal">&times;</span>
            <h2 class="section-title">Mix 1 - Pilih Komposisi</h2>
            <p style="margin-bottom: 1rem;">Paket Mix 1: 2 pcs keju (wajib) + 8 pcs lainnya (pilih sendiri komposisinya)</p>
            
            <div class="mix-options">
                <div style="margin-bottom: 1.5rem; padding: 1rem; background-color: var(--secondary); border-radius: 6px;">
                    <label for="mix1-package-count" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Jumlah Paket:</label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <button id="mix1-package-decrease" class="qty-btn" style="width: 40px;">-</button>
                        <input type="text" id="mix1-package-count" value="1" readonly style="width: 60px; text-align: center; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <button id="mix1-package-increase" class="qty-btn" style="width: 40px;">+</button>
                        <span style="margin-left: 10px; font-weight: bold;">Total: Rp <span id="mix1-package-total">30.000</span></span>
                    </div>
                    <div style="margin-top: 0.5rem; font-size: 0.9rem;">
                        <span id="mix1-keju-total">2 pcs keju</span> + <span id="mix1-other-total">8 pcs lainnya</span>
                    </div>
                </div>
                
                <div class="mix-option">
                    <div class="mix-option-title">Keju (wajib 2 pcs per paket):</div>
                    <div class="mix-item-control">
                        <div class="mix-item-info">
                            <div style="font-weight: bold;">Tahu Bakso Keju</div>
                        </div>
                        <div class="mix-item-quantity">
                            <button class="qty-btn" id="mix1-keju-decrease">-</button>
                            <input type="text" id="mix1-keju-qty" value="2" readonly style="width: 50px; text-align: center;">
                            <button class="qty-btn" id="mix1-keju-increase">+</button>
                        </div>
                        <div class="mix-item-processing">
                            <select id="mix1-keju-processing" class="processing-select">
                                <option value="frozen" selected>Frozen</option>
                                <option value="kukus">Kukus</option>
                                <option value="goreng">Goreng</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mix-option-title" style="margin-top: 1.5rem;">Pilih komposisi untuk 8 pcs lainnya per paket:</div>
                    <div class="mix-option-desc">Total pcs lainnya: <span id="mix1-required-pcs">8</span> pcs (harus tepat)</div>
                    
                    <div style="margin-top: 1rem;">
                        <!-- Original -->
                        <div class="mix-item-control">
                            <div class="mix-item-info">
                                <div>Tahu Bakso Original</div>
                            </div>
                            <div class="mix-item-quantity">
                                <button class="qty-btn mix1-decrease" data-type="original">-</button>
                                <input type="text" class="qty-input mix1-qty" data-type="original" value="0" readonly style="width: 50px;">
                                <button class="qty-btn mix1-increase" data-type="original">+</button>
                            </div>
                            <div class="mix-item-processing">
                                <select class="processing-select mix1-processing" data-type="original">
                                    <option value="frozen" selected>Frozen</option>
                                    <option value="kukus">Kukus</option>
                                    <option value="goreng">Goreng</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Sosis -->
                        <div class="mix-item-control">
                            <div class="mix-item-info">
                                <div>Tahu Bakso Sosis</div>
                            </div>
                            <div class="mix-item-quantity">
                                <button class="qty-btn mix1-decrease" data-type="sosis">-</button>
                                <input type="text" class="qty-input mix1-qty" data-type="sosis" value="0" readonly style="width: 50px;">
                                <button class="qty-btn mix1-increase" data-type="sosis">+</button>
                            </div>
                            <div class="mix-item-processing">
                                <select class="processing-select mix1-processing" data-type="sosis">
                                    <option value="frozen" selected>Frozen</option>
                                    <option value="kukus">Kukus</option>
                                    <option value="goreng">Goreng</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Rawit -->
                        <div class="mix-item-control">
                            <div class="mix-item-info">
                                <div>Tahu Bakso Rawit</div>
                            </div>
                            <div class="mix-item-quantity">
                                <button class="qty-btn mix1-decrease" data-type="rawit">-</button>
                                <input type="text" class="qty-input mix1-qty" data-type="rawit" value="0" readonly style="width: 50px;">
                                <button class="qty-btn mix1-increase" data-type="rawit">+</button>
                            </div>
                            <div class="mix-item-processing">
                                <select class="processing-select mix1-processing" data-type="rawit">
                                    <option value="frozen" selected>Frozen</option>
                                    <option value="kukus">Kukus</option>
                                    <option value="goreng">Goreng</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="margin-top: 1rem; padding: 1rem; background-color: var(--secondary); border-radius: 6px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>Total pcs lainnya dipilih:</span>
                                <span id="mix1-total-pcs">0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-weight: bold;">
                                <span>Harga paket Mix 1:</span>
                                <span>Rp <span id="mix1-package-price">30.000</span> Ã— <span id="mix1-package-count-display">1</span> = Rp <span id="mix1-total-price">30.000</span></span>
                            </div>
                        </div>
                        
                        <div id="mix1-error" style="color: #dc3545; margin-top: 1rem; display: none;">
                            Total pcs lainnya harus tepat <span id="mix1-required-error">8</span>!
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="addMix1ToCart" class="btn btn-primary" style="width: 100%;">
                Tambahkan ke Keranjang
            </button>
        </div>
    </div>

    <!-- Modal Mix 2 -->
    <div id="mix2Modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeMix2Modal">&times;</span>
            <h2 class="section-title">Mix 2 - Pilih Komposisi</h2>
            <p style="margin-bottom: 1rem;">Paket Mix 2: 10 pcs campuran (original/sosis/rawit) tanpa keju</p>
            
            <div class="mix-options">
                <div style="margin-bottom: 1.5rem; padding: 1rem; background-color: var(--secondary); border-radius: 6px;">
                    <label for="mix2-package-count" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Jumlah Paket:</label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <button id="mix2-package-decrease" class="qty-btn" style="width: 40px;">-</button>
                        <input type="text" id="mix2-package-count" value="1" readonly style="width: 60px; text-align: center; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <button id="mix2-package-increase" class="qty-btn" style="width: 40px;">+</button>
                        <span style="margin-left: 10px; font-weight: bold;">Total: Rp <span id="mix2-package-total">28.000</span></span>
                    </div>
                    <div style="margin-top: 0.5rem; font-size: 0.9rem;">
                        <span id="mix2-other-total">10 pcs campuran (tanpa keju)</span>
                    </div>
                </div>
                
                <div class="mix-option">
                    <div class="mix-option-title">Pilih komposisi untuk 10 pcs per paket:</div>
                    <div class="mix-option-desc">Total pcs: <span id="mix2-required-pcs">10</span> pcs (harus tepat)</div>
                    
                    <div style="margin-top: 1rem;">
                        <!-- Original -->
                        <div class="mix-item-control">
                            <div class="mix-item-info">
                                <div>Tahu Bakso Original</div>
                            </div>
                            <div class="mix-item-quantity">
                                <button class="qty-btn mix2-decrease" data-type="original">-</button>
                                <input type="text" class="qty-input mix2-qty" data-type="original" value="0" readonly style="width: 50px;">
                                <button class="qty-btn mix2-increase" data-type="original">+</button>
                            </div>
                            <div class="mix-item-processing">
                                <select class="processing-select mix2-processing" data-type="original">
                                    <option value="frozen" selected>Frozen</option>
                                    <option value="kukus">Kukus</option>
                                    <option value="goreng">Goreng</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Sosis -->
                        <div class="mix-item-control">
                            <div class="mix-item-info">
                                <div>Tahu Bakso Sosis</div>
                            </div>
                            <div class="mix-item-quantity">
                                <button class="qty-btn mix2-decrease" data-type="sosis">-</button>
                                <input type="text" class="qty-input mix2-qty" data-type="sosis" value="0" readonly style="width: 50px;">
                                <button class="qty-btn mix2-increase" data-type="sosis">+</button>
                            </div>
                            <div class="mix-item-processing">
                                <select class="processing-select mix2-processing" data-type="sosis">
                                    <option value="frozen" selected>Frozen</option>
                                    <option value="kukus">Kukus</option>
                                    <option value="goreng">Goreng</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Rawit -->
                        <div class="mix-item-control">
                            <div class="mix-item-info">
                                <div>Tahu Bakso Rawit</div>
                            </div>
                            <div class="mix-item-quantity">
                                <button class="qty-btn mix2-decrease" data-type="rawit">-</button>
                                <input type="text" class="qty-input mix2-qty" data-type="rawit" value="0" readonly style="width: 50px;">
                                <button class="qty-btn mix2-increase" data-type="rawit">+</button>
                            </div>
                            <div class="mix-item-processing">
                                <select class="processing-select mix2-processing" data-type="rawit">
                                    <option value="frozen" selected>Frozen</option>
                                    <option value="kukus">Kukus</option>
                                    <option value="goreng">Goreng</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="margin-top: 1rem; padding: 1rem; background-color: var(--secondary); border-radius: 6px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>Total pcs dipilih:</span>
                                <span id="mix2-total-pcs">0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-weight: bold;">
                                <span>Harga paket Mix 2:</span>
                                <span>Rp <span id="mix2-package-price">28.000</span> Ã— <span id="mix2-package-count-display">1</span> = Rp <span id="mix2-total-price">28.000</span></span>
                            </div>
                        </div>
                        
                        <div id="mix2-error" style="color: #dc3545; margin-top: 1rem; display: none;">
                            Total pcs harus tepat <span id="mix2-required-error">10</span>!
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="addMix2ToCart" class="btn btn-primary" style="width: 100%;">
                Tambahkan ke Keranjang
            </button>
        </div>
    </div>

    <!-- Modal Single Item -->
    <div id="singleModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeSingleModal">&times;</span>
            <h2 class="section-title" id="singleModalTitle">Pesan Item</h2>
            
            <div class="mix-options">
                <div class="mix-option">
                    <div class="mix-option-title" id="singleItemName">Tahu Bakso Keju</div>
                    
                    <div style="margin-top: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <div style="font-weight: bold;">Jumlah:</div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <button id="single-decrease" class="qty-btn" style="width: 40px; height: 40px;">-</button>
                                <input type="text" id="single-qty" value="1" readonly style="width: 60px; height: 40px; text-align: center; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 1.2rem;">
                                <button id="single-increase" class="qty-btn" style="width: 40px; height: 40px;">+</button>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <div style="font-weight: bold; margin-bottom: 0.5rem;">Pilih Pengolahan:</div>
                            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                                <div class="processing-option">
                                    <input type="radio" id="single-processing-frozen" name="single-processing" value="frozen" checked>
                                    <label for="single-processing-frozen">Frozen</label>
                                </div>
                                <div class="processing-option">
                                    <input type="radio" id="single-processing-kukus" name="single-processing" value="kukus">
                                    <label for="single-processing-kukus">Kukus</label>
                                </div>
                                <div class="processing-option">
                                    <input type="radio" id="single-processing-goreng" name="single-processing" value="goreng">
                                    <label for="single-processing-goreng">Goreng</label>
                                </div>
                            </div>
                        </div>
                        
                        <div style="padding: 1rem; background-color: var(--secondary); border-radius: 6px;">
                            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem;">
                                <span>Total Harga:</span>
                                <span id="single-total-price">Rp 3.500</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="addSingleToCart" class="btn btn-primary" style="width: 100%;">
                Tambahkan ke Keranjang
            </button>
        </div>
    </div>

    <!-- Modal Checkout -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeCheckoutModal">&times;</span>
            <h2 class="section-title">Checkout Pesanan</h2>
            <form id="checkoutForm">
                <div class="form-group">
                    <label for="customerName">Nama Lengkap</label>
                    <input type="text" id="customerName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="customerPhone">Nomor WhatsApp</label>
                    <input type="tel" id="customerPhone" class="form-control" required>
                </div>
                
                <div class="order-summary" style="margin-top: 1rem;">
                    <h3>Detail Pesanan</h3>
                    <div id="modalOrderItems"></div>
                    <div class="order-total">
                        <span>Total:</span>
                        <span id="modalOrderTotal">Rp 0</span>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1.5rem;">
                    Kirim Pesanan ke WhatsApp
                </button>
            </form>
        </div>
    </div>

    <footer>
        <div class="container footer-content">
            <div class="logo">
                <i></i> Home Foodie
            </div>
            <p>Pesan tahu bakso lezat dengan mudah dan cepat</p>
            <div class="footer-links">
                <a href="#" class="nav-link" data-target="home">Beranda</a>
                <a href="#" class="nav-link" data-target="menu">Menu</a>
                <a href="#" class="nav-link" data-target="cart">Keranjang</a>
            </div>
            <p>&copy; 2023 Home Foodie. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // ============ KONFIGURASI FIREBASE ============
        const firebaseConfig = {
            apiKey: "AIzaSyA7fwmx49XizBCuFi4IwIEEe1PIyvdKDec",
            authDomain: "homefoodie-89d87.firebaseapp.com",
            databaseURL: "https://homefoodie-89d87-default-rtdb.firebaseio.com",
            projectId: "homefoodie-89d87",
            storageBucket: "homefoodie-89d87.firebasestorage.app",
            messagingSenderId: "726510009376",
            appId: "1:726510009376:web:2a0d79fa3556ce28a0d045",
            measurementId: "G-VDVJ5V5FPY"
        };

        // Inisialisasi Firebase dengan Realtime Database
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // ============ VARIABEL GLOBAL ============
        let cart = JSON.parse(localStorage.getItem('tahuBaksoCart')) || [];
        let isAdminLoggedIn = false;
        let adminCredentials = {
            username: 'admin',
            password: 'tahu123'
        };
        
        let mix1Selection = {
            keju: { qty: 2, processing: 'frozen' },
            original: { qty: 0, processing: 'frozen' },
            sosis: { qty: 0, processing: 'frozen' },
            rawit: { qty: 0, processing: 'frozen' }
        };
        
        let mix2Selection = {
            original: { qty: 0, processing: 'frozen' },
            sosis: { qty: 0, processing: 'frozen' },
            rawit: { qty: 0, processing: 'frozen' }
        };
        
        let singleItem = {
            id: '',
            name: '',
            price: 0,
            processing: 'frozen',
            quantity: 1
        };
        
        let mix1PackageCount = 1;
        let mix2PackageCount = 1;
        
        let paymentInfo = {
            qrisImage: '',
            bank: '',
            accountNumber: '',
            accountName: ''
        };

        // ============ FUNGSI HELPER ============
        
        function showLoading(message = 'Loading...') {
            document.getElementById('loadingText').textContent = message;
            document.getElementById('loadingOverlay').style.display = 'flex';
        }
        
        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: var(--accent);
                color: white;
                padding: 10px 20px;
                border-radius: 5px;
                z-index: 10000;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                animation: fadeInOut 3s ease-in-out;
            `;
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInOut {
                    0% { opacity: 0; transform: translateY(-20px); }
                    10% { opacity: 1; transform: translateY(0); }
                    90% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-20px); }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
                style.remove();
            }, 3000);
        }
        
        function formatCurrency(amount) {
            return 'Rp ' + amount.toLocaleString('id-ID');
        }
        
        function formatDate(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            return date.toLocaleDateString('id-ID', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        // ============ FUNGSI FIREBASE REALTIME DATABASE ============
        
        async function saveOrderToFirebase(name, phone, totalPrice) {
            try {
                showLoading('Menyimpan pesanan...');
                
                const orderData = {
                    customer_name: name,
                    customer_phone: phone,
                    total_price: totalPrice,
                    items: cart,
                    status: 'pending',
                    created_at: new Date().toISOString(),
                    updated_at: new Date().toISOString()
                };
                
                const orderRef = database.ref('orders').push();
                await orderRef.set(orderData);
                
                showNotification('Pesanan berhasil disimpan ke database!');
                return orderRef.key;
            } catch (error) {
                console.error('Error saving order:', error);
                showNotification('Gagal menyimpan pesanan ke database');
                return null;
            } finally {
                hideLoading();
            }
        }
        
        async function loadOrdersFromFirebase() {
            try {
                showLoading('Memuat pesanan...');
                
                const snapshot = await database.ref('orders').once('value');
                const ordersData = snapshot.val();
                const orders = [];
                
                if (ordersData) {
                    Object.keys(ordersData).forEach(key => {
                        orders.push({
                            id: key,
                            ...ordersData[key]
                        });
                    });
                    
                    // Urutkan berdasarkan tanggal terbaru
                    orders.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
                    return orders;
                }
                
                return [];
            } catch (error) {
                console.error('Error loading orders:', error);
                showNotification('Gagal memuat pesanan');
                return [];
            } finally {
                hideLoading();
            }
        }
        
        async function updateOrderStatus(orderId, status) {
            try {
                await database.ref(`orders/${orderId}`).update({
                    status: status,
                    updated_at: new Date().toISOString()
                });
                
                showNotification(`Status pesanan diubah menjadi ${status}`);
                return true;
            } catch (error) {
                console.error('Error updating order:', error);
                showNotification('Gagal mengubah status pesanan');
                return false;
            }
        }
        
        async function deleteAllOrders() {
            try {
                showLoading('Menghapus semua data...');
                await database.ref('orders').remove();
                showNotification('Semua data pesanan berhasil dihapus!');
                return true;
            } catch (error) {
                console.error('Error deleting orders:', error);
                showNotification('Gagal menghapus data pesanan');
                return false;
            } finally {
                hideLoading();
            }
        }
        
        async function loadSettingsFromFirebase() {
            try {
                const snapshot = await database.ref('settings').once('value');
                return snapshot.val() || {};
            } catch (error) {
                console.error('Error loading settings:', error);
                return {};
            }
        }
        
        async function saveSettingsToFirebase(settings) {
            try {
                await database.ref('settings').set(settings);
                showNotification('Pengaturan berhasil disimpan!');
                return true;
            } catch (error) {
                console.error('Error saving settings:', error);
                showNotification('Gagal menyimpan pengaturan');
                return false;
            }
        }
        
        // ============ FUNGSI TAMPILAN ============
        
        async function loadOrders() {
            const orders = await loadOrdersFromFirebase();
            const tableBody = document.getElementById('ordersTableBody');
            const noOrders = document.getElementById('noOrders');
            
            if (orders.length === 0) {
                tableBody.innerHTML = '';
                noOrders.style.display = 'block';
                return;
            }
            
            noOrders.style.display = 'none';
            tableBody.innerHTML = '';
            
            orders.forEach((order, index) => {
                const row = document.createElement('tr');
                const items = order.items || [];
                const totalItems = items.reduce((total, item) => total + item.quantity, 0);
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${order.customer_name}</td>
                    <td>${order.customer_phone}</td>
                    <td>
                        <div style="max-height: 100px; overflow-y: auto;">
                            ${formatOrderDetails(items)}
                        </div>
                    </td>
                    <td>${totalItems}</td>
                    <td>${formatCurrency(order.total_price)}</td>
                    <td>${formatDate(order.created_at)}</td>
                    <td>
                        <span class="status-badge status-${order.status}">${getStatusText(order.status)}</span>
                    </td>
                    <td>
                        <select class="status-select" data-order-id="${order.id}" style="padding: 5px; border-radius: 4px; border: 1px solid #ddd;">
                            <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>Pending</option>
                            <option value="processing" ${order.status === 'processing' ? 'selected' : ''}>Diproses</option>
                            <option value="completed" ${order.status === 'completed' ? 'selected' : ''}>Selesai</option>
                            <option value="cancelled" ${order.status === 'cancelled' ? 'selected' : ''}>Dibatalkan</option>
                        </select>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            document.querySelectorAll('.status-select').forEach(select => {
                select.addEventListener('change', async function() {
                    const orderId = this.getAttribute('data-order-id');
                    const status = this.value;
                    await updateOrderStatus(orderId, status);
                    loadOrders();
                });
            });
        }
        
        function getStatusText(status) {
            const statusMap = {
                'pending': 'Pending',
                'processing': 'Diproses',
                'completed': 'Selesai',
                'cancelled': 'Dibatalkan'
            };
            return statusMap[status] || status;
        }
        
        function formatOrderDetails(items) {
            let details = '';
            items.forEach(item => {
                const itemTotal = item.price * item.quantity;
                details += `<div><strong>${item.name}${item.quantity > 1 ? ` (${item.quantity})` : ''}</strong>: ${formatCurrency(itemTotal)}</div>`;
                
                if (item.composition) {
                    if (item.composition.keju) {
                        details += `<div style="margin-left: 20px; font-size: 0.9em;">â€¢ ${item.composition.keju.qty} pcs keju (${item.composition.keju.processing})</div>`;
                    }
                    if (item.composition.original) {
                        details += `<div style="margin-left: 20px; font-size: 0.9em;">â€¢ ${item.composition.original.qty} pcs original (${item.composition.original.processing})</div>`;
                    }
                    if (item.composition.sosis) {
                        details += `<div style="margin-left: 20px; font-size: 0.9em;">â€¢ ${item.composition.sosis.qty} pcs sosis (${item.composition.sosis.processing})</div>`;
                    }
                    if (item.composition.rawit) {
                        details += `<div style="margin-left: 20px; font-size: 0.9em;">â€¢ ${item.composition.rawit.qty} pcs rawit (${item.composition.rawit.processing})</div>`;
                    }
                } else if (item.processing) {
                    details += `<div style="margin-left: 20px; font-size: 0.9em;">â€¢ Pengolahan: ${item.processing}</div>`;
                }
            });
            return details;
        }
        
        async function loadProductionSummary() {
            try {
                const orders = await loadOrdersFromFirebase();
                
                const production = {
                    keju: { kukus: 0, goreng: 0, frozen: 0, total: 0 },
                    original: { kukus: 0, goreng: 0, frozen: 0, total: 0 },
                    sosis: { kukus: 0, goreng: 0, frozen: 0, total: 0 },
                    rawit: { kukus: 0, goreng: 0, frozen: 0, total: 0 }
                };
                
                orders.forEach(order => {
                    const items = order.items || [];
                    items.forEach(item => {
                        if (item.composition) {
                            if (item.composition.keju) {
                                const comp = item.composition.keju;
                                const qty = comp.qty;
                                production.keju[comp.processing] += qty;
                                production.keju.total += qty;
                            }
                            if (item.composition.original) {
                                const comp = item.composition.original;
                                const qty = comp.qty;
                                production.original[comp.processing] += qty;
                                production.original.total += qty;
                            }
                            if (item.composition.sosis) {
                                const comp = item.composition.sosis;
                                const qty = comp.qty;
                                production.sosis[comp.processing] += qty;
                                production.sosis.total += qty;
                            }
                            if (item.composition.rawit) {
                                const comp = item.composition.rawit;
                                const qty = comp.qty;
                                production.rawit[comp.processing] += qty;
                                production.rawit.total += qty;
                            }
                        } else {
                            const qty = item.quantity;
                            if (production[item.id]) {
                                production[item.id][item.processing] += qty;
                                production[item.id].total += qty;
                            }
                        }
                    });
                });
                
                updateProductionDisplay(production);
            } catch (error) {
                console.error('Error loading production summary:', error);
            }
        }
        
        function updateProductionDisplay(production) {
            let totalAll = { kukus: 0, goreng: 0, frozen: 0, total: 0 };
            const types = ['keju', 'original', 'sosis', 'rawit'];
            
            types.forEach(type => {
                totalAll.kukus += production[type].kukus;
                totalAll.goreng += production[type].goreng;
                totalAll.frozen += production[type].frozen;
                totalAll.total += production[type].total;
            });
            
            document.getElementById('totalAllProduction').textContent = `${totalAll.total} pcs`;
            document.getElementById('totalKejuProduction').textContent = `${production.keju.total} pcs`;
            document.getElementById('totalOriginalProduction').textContent = `${production.original.total} pcs`;
            document.getElementById('totalSosisProduction').textContent = `${production.sosis.total} pcs`;
            document.getElementById('totalRawitProduction').textContent = `${production.rawit.total} pcs`;
            
            document.getElementById('totalKukus').textContent = `${totalAll.kukus} pcs`;
            document.getElementById('totalGoreng').textContent = `${totalAll.goreng} pcs`;
            document.getElementById('totalFrozen').textContent = `${totalAll.frozen} pcs`;
            document.getElementById('grandTotal').textContent = `${totalAll.total} pcs`;
            
            document.getElementById('productionTotalRow').style.display = totalAll.total > 0 ? 'table-row' : 'none';
            
            const summaryBody = document.getElementById('productionSummary');
            summaryBody.innerHTML = '';
            
            const typeNames = {
                keju: 'Tahu Bakso Keju',
                original: 'Tahu Bakso Original',
                sosis: 'Tahu Bakso Sosis',
                rawit: 'Tahu Bakso Rawit'
            };
            
            types.forEach(type => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${typeNames[type]}</strong></td>
                    <td>${production[type].kukus} pcs</td>
                    <td>${production[type].goreng} pcs</td>
                    <td>${production[type].frozen} pcs</td>
                    <td><strong>${production[type].total} pcs</strong></td>
                `;
                summaryBody.appendChild(row);
            });
        }
        
        // ============ FUNGSI REKAPAN PENDAPATAN ============
        
        async function loadRevenueSummary() {
            try {
                const orders = await loadOrdersFromFirebase();
                
                // Hitung statistik
                let totalRevenue = 0;
                let totalTransactions = orders.length;
                let totalItemsSold = 0;
                
                orders.forEach(order => {
                    if (order.status !== 'cancelled') {
                        totalRevenue += order.total_price;
                        const items = order.items || [];
                        items.forEach(item => {
                            totalItemsSold += item.quantity;
                        });
                    }
                });
                
                const averageTransaction = totalTransactions > 0 ? totalRevenue / totalTransactions : 0;
                
                // Update tampilan
                document.getElementById('totalRevenue').textContent = formatCurrency(totalRevenue);
                document.getElementById('totalTransactions').textContent = totalTransactions;
                document.getElementById('averageTransaction').textContent = formatCurrency(averageTransaction);
                document.getElementById('totalItemsSold').textContent = `${totalItemsSold} pcs`;
                
                // Tampilkan detail transaksi
                const revenueTableBody = document.getElementById('revenueTableBody');
                revenueTableBody.innerHTML = '';
                
                if (orders.length === 0) {
                    document.getElementById('noRevenue').style.display = 'block';
                } else {
                    document.getElementById('noRevenue').style.display = 'none';
                    orders.forEach((order, index) => {
                        const items = order.items || [];
                        const totalItems = items.reduce((total, item) => total + item.quantity, 0);
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${index + 1}</td>
                            <td>${order.customer_name}</td>
                            <td>${order.customer_phone}</td>
                            <td>${formatDate(order.created_at)}</td>
                            <td>${totalItems}</td>
                            <td>${formatCurrency(order.total_price)}</td>
                        `;
                        revenueTableBody.appendChild(row);
                    });
                }
                
                // Tampilkan ringkasan harian
                const dailySummary = document.getElementById('dailyRevenueSummary');
                dailySummary.innerHTML = '';
                
                // Kelompokkan per hari
                const dailyData = {};
                orders.forEach(order => {
                    if (order.status !== 'cancelled') {
                        const date = new Date(order.created_at).toLocaleDateString('id-ID');
                        if (!dailyData[date]) {
                            dailyData[date] = {
                                revenue: 0,
                                transactions: 0,
                                items: 0
                            };
                        }
                        dailyData[date].revenue += order.total_price;
                        dailyData[date].transactions += 1;
                        const items = order.items || [];
                        items.forEach(item => {
                            dailyData[date].items += item.quantity;
                        });
                    }
                });
                
                // Tampilkan per hari
                for (const [date, data] of Object.entries(dailyData)) {
                    const dailyDiv = document.createElement('div');
                    dailyDiv.style.cssText = 'background-color: white; padding: 1rem; border-radius: 6px; margin-bottom: 1rem; border: 1px solid #eee;';
                    dailyDiv.innerHTML = `
                        <h5 style="margin-bottom: 0.5rem; color: var(--primary);">${date}</h5>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                            <div>
                                <div class="stat-label">Pendapatan</div>
                                <div class="stat-value">${formatCurrency(data.revenue)}</div>
                            </div>
                            <div>
                                <div class="stat-label">Transaksi</div>
                                <div class="stat-value">${data.transactions}</div>
                            </div>
                            <div>
                                <div class="stat-label">Item Terjual</div>
                                <div class="stat-value">${data.items} pcs</div>
                            </div>
                        </div>
                    `;
                    dailySummary.appendChild(dailyDiv);
                }
            } catch (error) {
                console.error('Error loading revenue summary:', error);
                showNotification('Gagal memuat rekapan pendapatan');
            }
        }
        
        // ============ FUNGSI REKAPAN PESANAN CUSTOMER ============
        
        async function loadCustomerOrdersSummary() {
            try {
                const orders = await loadOrdersFromFirebase();
                
                // Kelompokkan per customer
                const customers = {};
                
                orders.forEach(order => {
                    const key = `${order.customer_name}|${order.customer_phone}`;
                    if (!customers[key]) {
                        customers[key] = {
                            name: order.customer_name,
                            phone: order.customer_phone,
                            totalOrders: 0,
                            totalItems: 0,
                            totalRevenue: 0,
                            orders: []
                        };
                    }
                    customers[key].totalOrders += 1;
                    customers[key].totalRevenue += order.total_price;
                    const items = order.items || [];
                    let totalItems = 0;
                    items.forEach(item => {
                        totalItems += item.quantity;
                    });
                    customers[key].totalItems += totalItems;
                    customers[key].orders.push(order);
                });
                
                // Update statistik
                const totalCustomers = Object.keys(customers).length;
                const totalCustomerOrders = orders.length;
                let totalCustomerItems = 0;
                let totalCustomerRevenue = 0;
                
                Object.values(customers).forEach(customer => {
                    totalCustomerItems += customer.totalItems;
                    totalCustomerRevenue += customer.totalRevenue;
                });
                
                document.getElementById('totalCustomers').textContent = totalCustomers;
                document.getElementById('totalCustomerOrders').textContent = totalCustomerOrders;
                document.getElementById('totalCustomerItems').textContent = `${totalCustomerItems} pcs`;
                document.getElementById('totalCustomerRevenue').textContent = formatCurrency(totalCustomerRevenue);
                
                // Tampilkan daftar customer
                const customerOrdersList = document.getElementById('customerOrdersList');
                customerOrdersList.innerHTML = '';
                
                if (totalCustomers === 0) {
                    customerOrdersList.innerHTML = '<p style="text-align: center; padding: 2rem;">Belum ada data customer.</p>';
                } else {
                    for (const [key, customer] of Object.entries(customers)) {
                        const customerCard = document.createElement('div');
                        customerCard.className = 'customer-card';
                        
                        let ordersDetails = '';
                        customer.orders.forEach((order, index) => {
                            const items = order.items || [];
                            let orderDetails = '';
                            items.forEach(item => {
                                orderDetails += `<div>${item.name} (${item.quantity}): ${formatCurrency(item.price * item.quantity)}</div>`;
                            });
                            
                            ordersDetails += `
                                <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px dashed #ddd;">
                                    <div><strong>Pesanan ${index + 1}</strong> (${formatDate(order.created_at)})</div>
                                    <div>Status: <span class="status-badge status-${order.status}">${getStatusText(order.status)}</span></div>
                                    <div>Total: ${formatCurrency(order.total_price)}</div>
                                    ${orderDetails}
                                </div>
                            `;
                        });
                        
                        customerCard.innerHTML = `
                            <h4>${customer.name} - ${customer.phone}</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-top: 1rem;">
                                <div>
                                    <div class="stat-label">Total Pesanan</div>
                                    <div class="stat-value">${customer.totalOrders}</div>
                                </div>
                                <div>
                                    <div class="stat-label">Total Item</div>
                                    <div class="stat-value">${customer.totalItems} pcs</div>
                                </div>
                                <div>
                                    <div class="stat-label">Total Belanja</div>
                                    <div class="stat-value">${formatCurrency(customer.totalRevenue)}</div>
                                </div>
                            </div>
                            <div class="customer-orders-details">
                                <h5 style="margin-bottom: 1rem; color: var(--accent);">Detail Pesanan:</h5>
                                ${ordersDetails}
                            </div>
                        `;
                        customerOrdersList.appendChild(customerCard);
                    }
                }
            } catch (error) {
                console.error('Error loading customer orders summary:', error);
                showNotification('Gagal memuat rekapan pesanan customer');
            }
        }
        
        // ============ INISIALISASI ============
        
        async function init() {
            try {
                showLoading('Memuat data...');
                
                const settings = await loadSettingsFromFirebase();
                
                if (settings.admin_credentials) {
                    adminCredentials = settings.admin_credentials;
                }
                
                if (settings.payment_info) {
                    paymentInfo = settings.payment_info;
                    loadPaymentInfo();
                }
                
                isAdminLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
                
                updateCartCount();
                
                hideLoading();
            } catch (error) {
                console.error('Error during initialization:', error);
                hideLoading();
                showNotification('Gagal memuat data, coba refresh halaman');
            }
        }
        
        // ============ FUNGSI KERANJANG ============
        
        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }
        
        function addToCart(itemId, name, price, quantity = 1, description = '', composition = null, processing = '') {
            const existingItemIndex = cart.findIndex(item => {
                if (item.id !== itemId) return false;
                if (composition) {
                    return JSON.stringify(item.composition) === JSON.stringify(composition);
                }
                return item.processing === processing;
            });
            
            if (existingItemIndex !== -1) {
                cart[existingItemIndex].quantity += quantity;
            } else {
                const newItem = {
                    id: itemId,
                    name: name,
                    price: price,
                    quantity: quantity,
                    description: description
                };
                
                if (composition) {
                    newItem.composition = composition;
                } else if (processing) {
                    newItem.processing = processing;
                }
                
                cart.push(newItem);
            }
            
            localStorage.setItem('tahuBaksoCart', JSON.stringify(cart));
            
            updateCartCount();
            showNotification(`${name} ${quantity > 1 ? `(${quantity}) ` : ''}ditambahkan ke keranjang`);
        }
        
        function updateCartDisplay() {
            const cartItemsContainer = document.getElementById('cartItems');
            const cartSummary = document.getElementById('cartSummary');
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="cart-empty">
                        <p>Keranjang belanja Anda masih kosong.</p>
                        <a href="#" class="btn nav-link" data-target="menu" style="margin-top: 1rem;">Lihat Menu</a>
                    </div>
                `;
                cartSummary.style.display = 'none';
                return;
            }
            
            let cartItemsHTML = '';
            let summaryHTML = '';
            let totalPrice = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                totalPrice += itemTotal;
                
                let details = '';
                if (item.composition) {
                    if (item.composition.keju) {
                        details += `${item.composition.keju.qty} pcs keju ${item.composition.keju.processing}<br>`;
                    }
                    if (item.composition.original) {
                        details += `${item.composition.original.qty} pcs original ${item.composition.original.processing}<br>`;
                    }
                    if (item.composition.sosis) {
                        details += `${item.composition.sosis.qty} pcs sosis ${item.composition.sosis.processing}<br>`;
                    }
                    if (item.composition.rawit) {
                        details += `${item.composition.rawit.qty} pcs rawit ${item.composition.rawit.processing}<br>`;
                    }
                } else if (item.processing) {
                    details += `Pengolahan: ${item.processing}`;
                }
                
                cartItemsHTML += `
                    <div class="order-item">
                        <div class="order-item-details">
                            <strong>${item.name}${item.quantity > 1 ? ` (${item.quantity} paket)` : ''}</strong>
                            ${details ? `<div style="font-size: 0.9rem; color: #666; margin-top: 5px;">${details}</div>` : ''}
                            <div>${formatCurrency(item.price)} ${item.quantity > 1 ? `Ã— ${item.quantity}` : ''}</div>
                        </div>
                        <div class="order-item-actions">
                            <span style="font-weight: bold;">${formatCurrency(itemTotal)}</span>
                            <button class="btn btn-small remove-from-cart" data-index="${index}" style="background-color: #dc3545; color: white;">
                                Hapus
                            </button>
                        </div>
                    </div>
                `;
                
                summaryHTML += `
                    <div class="order-item">
                        <span>${item.name}${item.quantity > 1 ? ` (${item.quantity})` : ''}</span>
                        <span>${formatCurrency(itemTotal)}</span>
                    </div>
                `;
            });
            
            cartItemsContainer.innerHTML = cartItemsHTML;
            document.getElementById('cartSummaryItems').innerHTML = summaryHTML;
            document.getElementById('cartTotal').textContent = formatCurrency(totalPrice);
            cartSummary.style.display = 'block';
            
            document.querySelectorAll('.remove-from-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    removeFromCart(index);
                });
            });
            
            updateCartCount();
        }
        
        function removeFromCart(index) {
            if (index >= 0 && index < cart.length) {
                const itemName = cart[index].name;
                cart.splice(index, 1);
                localStorage.setItem('tahuBaksoCart', JSON.stringify(cart));
                updateCartDisplay();
                showNotification(`${itemName} dihapus dari keranjang`);
            }
        }
        
        // ============ FUNGSI QRIS ============
        
        function loadPaymentInfo() {
            const qrisImage = document.getElementById('qrisImage');
            const qrisPlaceholder = document.getElementById('qrisPlaceholder');
            const bankInfo = document.getElementById('bankInfo');
            const accountNumber = document.getElementById('accountNumber');
            const accountName = document.getElementById('accountName');
            const copyAccountBtn = document.getElementById('copyAccountBtn');
            
            if (paymentInfo.qrisImage) {
                qrisImage.src = paymentInfo.qrisImage;
                qrisImage.style.display = 'block';
                qrisPlaceholder.style.display = 'none';
            } else {
                qrisImage.style.display = 'none';
                qrisPlaceholder.style.display = 'block';
            }
            
            if (paymentInfo.bank) {
                bankInfo.textContent = `Bank: ${paymentInfo.bank}`;
                accountNumber.textContent = `No. Rekening: ${paymentInfo.accountNumber}`;
                accountName.textContent = `Atas Nama: ${paymentInfo.accountName}`;
                copyAccountBtn.style.display = 'inline-block';
            } else {
                bankInfo.textContent = 'Bank: -';
                accountNumber.textContent = 'No. Rekening: -';
                accountName.textContent = 'Atas Nama: -';
                copyAccountBtn.style.display = 'none';
            }
        }
        
        // ============ EVENT LISTENERS ============
        
        document.addEventListener('DOMContentLoaded', init);
        
        // Navigasi
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = this.getAttribute('data-target');
                
                document.querySelectorAll('.section').forEach(section => {
                    section.style.display = 'none';
                });
                
                document.getElementById(target).style.display = 'block';
                
                if (target === 'cart') {
                    updateCartDisplay();
                }
                
                if (target === 'admin') {
                    if (isAdminLoggedIn) {
                        showAdminContent();
                    } else {
                        document.getElementById('adminLogin').style.display = 'block';
                        document.getElementById('adminContent').style.display = 'none';
                    }
                }
            });
        });
        
        // Login Admin
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            
            if (username === adminCredentials.username && password === adminCredentials.password) {
                isAdminLoggedIn = true;
                localStorage.setItem('adminLoggedIn', 'true');
                showAdminContent();
                showNotification('Login berhasil!');
            } else {
                showNotification('Username atau password salah!');
                this.reset();
            }
        });
        
        // Logout Admin
        document.getElementById('logoutBtn').addEventListener('click', function() {
            isAdminLoggedIn = false;
            localStorage.removeItem('adminLoggedIn');
            document.getElementById('adminLogin').style.display = 'block';
            document.getElementById('adminContent').style.display = 'none';
            showNotification('Logout berhasil!');
        });
        
        // Checkout - FIXED: WhatsApp tidak berjalan
        document.getElementById('checkoutForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            
            if (cart.length === 0) {
                showNotification('Keranjang belanja masih kosong');
                return;
            }
            
            if (!name || !phone) {
                showNotification('Harap isi nama dan nomor WhatsApp');
                return;
            }
            
            // Hitung total
            let totalPrice = 0;
            cart.forEach(item => {
                totalPrice += item.price * item.quantity;
            });
            
            // Simpan ke Firebase
            const savedOrderId = await saveOrderToFirebase(name, phone, totalPrice);
            
            if (savedOrderId) {
                // Buat pesan untuk WhatsApp
                let message = `Halo, saya ingin memesan tahu bakso:\n\n`;
                message += `Nama: ${name}\n`;
                message += `No. WhatsApp: ${phone}\n\n`;
                message += `**DETAIL PESANAN:**\n`;
                
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    message += `- ${item.name}${item.quantity > 1 ? ` (${item.quantity})` : ''}: ${formatCurrency(itemTotal)}\n`;
                    
                    if (item.composition) {
                        if (item.composition.keju) {
                            message += `  - ${item.composition.keju.qty} pcs keju (${item.composition.keju.processing})\n`;
                        }
                        if (item.composition.original) {
                            message += `  - ${item.composition.original.qty} pcs original (${item.composition.original.processing})\n`;
                        }
                        if (item.composition.sosis) {
                            message += `  - ${item.composition.sosis.qty} pcs sosis (${item.composition.sosis.processing})\n`;
                        }
                        if (item.composition.rawit) {
                            message += `  - ${item.composition.rawit.qty} pcs rawit (${item.composition.rawit.processing})\n`;
                        }
                    } else if (item.processing) {
                        message += `  - Pengolahan: ${item.processing}\n`;
                    }
                });
                
                message += `\n**TOTAL: ${formatCurrency(totalPrice)}**\n`;
                message += `\nTerima kasih!`;
                
                // Encode message untuk URL
                const encodedMessage = encodeURIComponent(message);
                
                // Nomor WhatsApp - GANTI DENGAN NOMOR ANDA
                const sellerPhone = "628999158937"; // Ganti dengan nomor WhatsApp penjual 628999158937
                
                // Reset keranjang
                cart = [];
                localStorage.removeItem('tahuBaksoCart');
                updateCartCount();
                updateCartDisplay();
                
                // Tutup modal
                document.getElementById('checkoutModal').style.display = 'none';
                this.reset();
                
                // Redirect ke WhatsApp - FIXED: URL yang benar
                window.open(`https://wa.me/${sellerPhone}?text=${encodedMessage}`, '_blank');
                
                showNotification('Pesanan berhasil dikirim ke WhatsApp!');
            }
        });
        
        // Tombol Refresh Orders
        document.getElementById('refreshOrders').addEventListener('click', function() {
            loadOrders();
        });
        
        // Tombol Clear Orders - FIXED: Tidak berfungsi
        document.getElementById('clearOrders').addEventListener('click', async function() {
            if (confirm('Apakah Anda yakin ingin menghapus SEMUA data pesanan? Tindakan ini tidak dapat dibatalkan!')) {
                const success = await deleteAllOrders();
                if (success) {
                    loadOrders();
                }
            }
        });
        
        // Tombol Export Orders
        document.getElementById('exportOrders').addEventListener('click', function() {
            const ordersTable = document.getElementById('ordersTable');
            let csv = 'No,Nama,No WhatsApp,Pesanan,Jumlah,Total,Waktu,Status\n';
            
            const rows = ordersTable.querySelectorAll('tr');
            rows.forEach((row, index) => {
                if (index > 0) { // Skip header
                    const cols = row.querySelectorAll('td');
                    if (cols.length > 0) {
                        const rowData = [];
                        cols.forEach((col, colIndex) => {
                            // Skip kolom terakhir (Aksi)
                            if (colIndex < cols.length - 1) {
                                let text = col.textContent.trim();
                                // Handle pesanan multi-line
                                if (colIndex === 3) {
                                    text = text.replace(/\n/g, '; ');
                                }
                                // Enclose in quotes if contains comma
                                if (text.includes(',')) {
                                    text = `"${text}"`;
                                }
                                rowData.push(text);
                            }
                        });
                        csv += rowData.join(',') + '\n';
                    }
                }
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `orders_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showNotification('Data berhasil diekspor ke CSV');
        });
        
        // Tombol Refresh Production
        document.getElementById('refreshProduction').addEventListener('click', function() {
            loadProductionSummary();
        });
        
        // Tombol Print Production
        document.getElementById('printProduction').addEventListener('click', function() {
            window.print();
        });
        
        // Tombol Refresh Revenue
        document.getElementById('refreshRevenue').addEventListener('click', function() {
            loadRevenueSummary();
        });
        
        // Tombol Print Revenue
        document.getElementById('printRevenue').addEventListener('click', function() {
            window.print();
        });
        
        // Tombol Refresh Customer Orders
        document.getElementById('refreshCustomerOrders').addEventListener('click', function() {
            loadCustomerOrdersSummary();
        });
        
        // Tombol Export Customer Orders
        document.getElementById('exportCustomerOrders').addEventListener('click', function() {
            const customers = document.querySelectorAll('.customer-card');
            if (customers.length === 0) {
                showNotification('Tidak ada data customer untuk diekspor');
                return;
            }
            
            let csv = 'Nama,No WhatsApp,Total Pesanan,Total Item,Total Belanja\n';
            
            customers.forEach(card => {
                const name = card.querySelector('h4').textContent.split(' - ')[0];
                const phone = card.querySelector('h4').textContent.split(' - ')[1];
                const stats = card.querySelectorAll('.stat-value');
                
                if (stats.length >= 3) {
                    const totalOrders = stats[0].textContent;
                    const totalItems = stats[1].textContent.replace(' pcs', '');
                    const totalRevenue = stats[2].textContent.replace('Rp ', '').replace(/\./g, '');
                    
                    csv += `"${name}","${phone}",${totalOrders},${totalItems},${totalRevenue}\n`;
                }
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `customers_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showNotification('Data customer berhasil diekspor ke CSV');
        });
        
        // Icon keranjang
        document.getElementById('cartIcon').addEventListener('click', function() {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById('cart').style.display = 'block';
            updateCartDisplay();
        });
        
        // Icon QRIS
        document.getElementById('qrisIcon').addEventListener('click', function() {
            document.getElementById('qrisModal').style.display = 'flex';
        });
        
        // Close modal QRIS
        document.getElementById('closeQrisModal').addEventListener('click', function() {
            document.getElementById('qrisModal').style.display = 'none';
        });
        
        // Salin informasi rekening
        document.getElementById('copyAccountBtn').addEventListener('click', function() {
            const textToCopy = `Bank: ${paymentInfo.bank}\nNo. Rekening: ${paymentInfo.accountNumber}\nAtas Nama: ${paymentInfo.accountName}`;
            
            navigator.clipboard.writeText(textToCopy).then(function() {
                showNotification('Informasi rekening berhasil disalin!');
            }, function(err) {
                console.error('Gagal menyalin: ', err);
                showNotification('Gagal menyalin, coba lagi');
            });
        });
        
        // Tombol Checkout
        document.getElementById('checkoutBtn').addEventListener('click', function() {
            if (cart.length === 0) {
                showNotification('Keranjang belanja masih kosong');
                return;
            }
            
            // Tampilkan modal checkout
            const modal = document.getElementById('checkoutModal');
            modal.style.display = 'flex';
            
            // Isi detail pesanan di modal
            let modalItemsHTML = '';
            let totalPrice = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                totalPrice += itemTotal;
                
                let details = '';
                if (item.composition) {
                    if (item.composition.keju) {
                        details += `<small>${item.composition.keju.qty} pcs keju ${item.composition.keju.processing}</small><br>`;
                    }
                    if (item.composition.original) {
                        details += `<small>${item.composition.original.qty} pcs original ${item.composition.original.processing}</small><br>`;
                    }
                    if (item.composition.sosis) {
                        details += `<small>${item.composition.sosis.qty} pcs sosis ${item.composition.sosis.processing}</small><br>`;
                    }
                    if (item.composition.rawit) {
                        details += `<small>${item.composition.rawit.qty} pcs rawit ${item.composition.rawit.processing}</small><br>`;
                    }
                } else if (item.processing) {
                    details += `<small>Pengolahan: ${item.processing}</small>`;
                }
                
                modalItemsHTML += `
                    <div class="order-item">
                        <div style="flex-grow: 1;">
                            <span>${item.name}${item.quantity > 1 ? ` (${item.quantity} paket)` : ''}</span>
                            ${details ? `<div style="margin-top: 5px;">${details}</div>` : ''}
                        </div>
                        <span>${formatCurrency(itemTotal)}</span>
                    </div>
                `;
            });
            
            document.getElementById('modalOrderItems').innerHTML = modalItemsHTML;
            document.getElementById('modalOrderTotal').textContent = formatCurrency(totalPrice);
        });
        
        // Close modal checkout
        document.getElementById('closeCheckoutModal').addEventListener('click', function() {
            document.getElementById('checkoutModal').style.display = 'none';
        });
        
        // ============ FUNGSI ADMIN ============
        
        function showAdminContent() {
            document.getElementById('adminLogin').style.display = 'none';
            document.getElementById('adminContent').style.display = 'block';
            loadOrders();
            loadProductionSummary();
            loadRevenueSummary();
            loadCustomerOrdersSummary();
            loadQrisSettings();
            displayCurrentAdminInfo();
        }
        
        function displayCurrentAdminInfo() {
            document.getElementById('currentUsername').textContent = `Username: ${adminCredentials.username}`;
            document.getElementById('newUsername').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }
        
        function loadQrisSettings() {
            document.getElementById('qrisImageUrl').value = paymentInfo.qrisImage || '';
            document.getElementById('bankName').value = paymentInfo.bank || '';
            document.getElementById('bankAccountNumber').value = paymentInfo.accountNumber || '';
            document.getElementById('bankAccountName').value = paymentInfo.accountName || '';
            
            const preview = document.getElementById('previewQrisImage');
            const previewContainer = document.getElementById('qrisPreview');
            
            if (paymentInfo.qrisImage) {
                preview.src = paymentInfo.qrisImage;
                previewContainer.style.display = 'block';
            } else {
                previewContainer.style.display = 'none';
            }
        }
        
        // Tab untuk admin
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                document.querySelectorAll('.admin-tab').forEach(t => {
                    t.classList.remove('active');
                });
                
                document.querySelectorAll('.admin-tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                this.classList.add('active');
                document.getElementById(tabId + 'Tab').classList.add('active');
                
                // Load data sesuai tab
                if (isAdminLoggedIn) {
                    switch(tabId) {
                        case 'settings':
                            displayCurrentAdminInfo();
                            break;
                        case 'qris':
                            loadQrisSettings();
                            break;
                        case 'production':
                            loadProductionSummary();
                            break;
                        case 'revenue':
                            loadRevenueSummary();
                            break;
                        case 'customer-orders':
                            loadCustomerOrdersSummary();
                            break;
                    }
                }
            });
        });
        
        // Save QRIS settings
        document.getElementById('saveQrisSettings').addEventListener('click', async function() {
            const qrisImageUrl = document.getElementById('qrisImageUrl').value.trim();
            const bankName = document.getElementById('bankName').value.trim();
            const bankAccountNumber = document.getElementById('bankAccountNumber').value.trim();
            const bankAccountName = document.getElementById('bankAccountName').value.trim();
            
            paymentInfo.qrisImage = qrisImageUrl;
            paymentInfo.bank = bankName;
            paymentInfo.accountNumber = bankAccountNumber;
            paymentInfo.accountName = bankAccountName;
            
            const settings = {
                admin_credentials: adminCredentials,
                payment_info: paymentInfo
            };
            
            await saveSettingsToFirebase(settings);
            
            const preview = document.getElementById('previewQrisImage');
            const previewContainer = document.getElementById('qrisPreview');
            
            if (qrisImageUrl) {
                preview.src = qrisImageUrl;
                previewContainer.style.display = 'block';
            } else {
                previewContainer.style.display = 'none';
            }
            
            loadPaymentInfo();
        });
        
        // Save admin settings
        document.getElementById('saveAdminSettings').addEventListener('click', async function() {
            const newUsername = document.getElementById('newUsername').value.trim();
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!newUsername && !newPassword) {
                showNotification('Masukkan username atau password baru');
                return;
            }
            
            if (newPassword && newPassword !== confirmPassword) {
                showNotification('Password dan konfirmasi password tidak cocok');
                return;
            }
            
            if (newUsername) {
                adminCredentials.username = newUsername;
            }
            
            if (newPassword) {
                adminCredentials.password = newPassword;
            }
            
            const settings = {
                admin_credentials: adminCredentials,
                payment_info: paymentInfo
            };
            
            await saveSettingsToFirebase(settings);
            
            displayCurrentAdminInfo();
        });
        
        // Preview QRIS URL
        document.getElementById('qrisImageUrl').addEventListener('input', function() {
            const url = this.value;
            const preview = document.getElementById('previewQrisImage');
            const previewContainer = document.getElementById('qrisPreview');
            
            if (url) {
                preview.src = url;
                previewContainer.style.display = 'block';
            } else {
                previewContainer.style.display = 'none';
            }
        });

        // ============ MODAL HANDLERS ============
        
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('open-mix1-modal')) {
                e.preventDefault();
                document.getElementById('mix1Modal').style.display = 'flex';
                resetMix1Selection();
                updateMix1Display();
            }
            
            if (e.target.classList.contains('open-mix2-modal')) {
                e.preventDefault();
                document.getElementById('mix2Modal').style.display = 'flex';
                resetMix2Selection();
                updateMix2Display();
            }
            
            if (e.target.classList.contains('open-single-modal')) {
                e.preventDefault();
                singleItem.id = e.target.getAttribute('data-id');
                singleItem.name = e.target.getAttribute('data-name');
                singleItem.price = parseInt(e.target.getAttribute('data-price'));
                singleItem.quantity = 1;
                singleItem.processing = 'frozen';
                
                document.getElementById('singleModalTitle').textContent = `Pesan ${singleItem.name}`;
                document.getElementById('singleItemName').textContent = singleItem.name;
                document.getElementById('single-processing-frozen').checked = true;
                document.getElementById('single-qty').value = '1';
                updateSinglePrice();
                document.getElementById('singleModal').style.display = 'flex';
            }
        });

        function resetMix1Selection() {
            mix1Selection = {
                keju: { qty: 2, processing: 'frozen' },
                original: { qty: 0, processing: 'frozen' },
                sosis: { qty: 0, processing: 'frozen' },
                rawit: { qty: 0, processing: 'frozen' }
            };
            
            mix1PackageCount = 1;
            document.getElementById('mix1-package-count').value = mix1PackageCount;
            
            document.querySelectorAll('.mix1-qty').forEach(input => {
                input.value = '0';
            });
            
            document.getElementById('mix1-keju-qty').value = '2';
            document.getElementById('mix1-keju-processing').value = 'frozen';
        }

        function updateMix1Display() {
            const totalPcs = mix1Selection.original.qty + mix1Selection.sosis.qty + mix1Selection.rawit.qty;
            const requiredPcs = mix1PackageCount * 8;
            const totalKeju = mix1PackageCount * 2;
            const totalPrice = mix1PackageCount * 30000;
            
            document.querySelector('.mix1-qty[data-type="original"]').value = mix1Selection.original.qty;
            document.querySelector('.mix1-qty[data-type="sosis"]').value = mix1Selection.sosis.qty;
            document.querySelector('.mix1-qty[data-type="rawit"]').value = mix1Selection.rawit.qty;
            
            document.getElementById('mix1-keju-processing').value = mix1Selection.keju.processing;
            document.querySelector('.mix1-processing[data-type="original"]').value = mix1Selection.original.processing;
            document.querySelector('.mix1-processing[data-type="sosis"]').value = mix1Selection.sosis.processing;
            document.querySelector('.mix1-processing[data-type="rawit"]').value = mix1Selection.rawit.processing;
            
            document.getElementById('mix1-package-count').value = mix1PackageCount;
            document.getElementById('mix1-total-pcs').textContent = totalPcs;
            document.getElementById('mix1-required-pcs').textContent = requiredPcs;
            document.getElementById('mix1-keju-total').textContent = `${totalKeju} pcs keju`;
            document.getElementById('mix1-other-total').textContent = `${requiredPcs} pcs lainnya`;
            document.getElementById('mix1-package-total').textContent = totalPrice.toLocaleString('id-ID');
            document.getElementById('mix1-package-price').textContent = '30.000';
            document.getElementById('mix1-package-count-display').textContent = mix1PackageCount;
            document.getElementById('mix1-total-price').textContent = totalPrice.toLocaleString('id-ID');
            
            const errorElement = document.getElementById('mix1-error');
            document.getElementById('mix1-required-error').textContent = requiredPcs;
            
            if (totalPcs !== requiredPcs) {
                errorElement.style.display = 'block';
                document.getElementById('addMix1ToCart').disabled = true;
                document.getElementById('addMix1ToCart').style.opacity = '0.5';
            } else {
                errorElement.style.display = 'none';
                document.getElementById('addMix1ToCart').disabled = false;
                document.getElementById('addMix1ToCart').style.opacity = '1';
            }
        }

        function resetMix2Selection() {
            mix2Selection = {
                original: { qty: 0, processing: 'frozen' },
                sosis: { qty: 0, processing: 'frozen' },
                rawit: { qty: 0, processing: 'frozen' }
            };
            
            mix2PackageCount = 1;
            document.getElementById('mix2-package-count').value = mix2PackageCount;
            
            document.querySelectorAll('.mix2-qty').forEach(input => {
                input.value = '0';
            });
        }

        function updateMix2Display() {
            const totalPcs = mix2Selection.original.qty + mix2Selection.sosis.qty + mix2Selection.rawit.qty;
            const requiredPcs = mix2PackageCount * 10;
            const totalPrice = mix2PackageCount * 28000;
            
            document.querySelector('.mix2-qty[data-type="original"]').value = mix2Selection.original.qty;
            document.querySelector('.mix2-qty[data-type="sosis"]').value = mix2Selection.sosis.qty;
            document.querySelector('.mix2-qty[data-type="rawit"]').value = mix2Selection.rawit.qty;
            
            document.querySelector('.mix2-processing[data-type="original"]').value = mix2Selection.original.processing;
            document.querySelector('.mix2-processing[data-type="sosis"]').value = mix2Selection.sosis.processing;
            document.querySelector('.mix2-processing[data-type="rawit"]').value = mix2Selection.rawit.processing;
            
            document.getElementById('mix2-package-count').value = mix2PackageCount;
            document.getElementById('mix2-total-pcs').textContent = totalPcs;
            document.getElementById('mix2-required-pcs').textContent = requiredPcs;
            document.getElementById('mix2-other-total').textContent = `${requiredPcs} pcs campuran (tanpa keju)`;
            document.getElementById('mix2-package-total').textContent = totalPrice.toLocaleString('id-ID');
            document.getElementById('mix2-package-price').textContent = '28.000';
            document.getElementById('mix2-package-count-display').textContent = mix2PackageCount;
            document.getElementById('mix2-total-price').textContent = totalPrice.toLocaleString('id-ID');
            
            const errorElement = document.getElementById('mix2-error');
            document.getElementById('mix2-required-error').textContent = requiredPcs;
            
            if (totalPcs !== requiredPcs) {
                errorElement.style.display = 'block';
                document.getElementById('addMix2ToCart').disabled = true;
                document.getElementById('addMix2ToCart').style.opacity = '0.5';
            } else {
                errorElement.style.display = 'none';
                document.getElementById('addMix2ToCart').disabled = false;
                document.getElementById('addMix2ToCart').style.opacity = '1';
            }
        }

        function updateSinglePrice() {
            const totalPrice = singleItem.price * singleItem.quantity;
            document.getElementById('single-total-price').textContent = formatCurrency(totalPrice);
        }

        document.getElementById('closeMix1Modal').addEventListener('click', function() {
            document.getElementById('mix1Modal').style.display = 'none';
        });
        
        document.getElementById('closeMix2Modal').addEventListener('click', function() {
            document.getElementById('mix2Modal').style.display = 'none';
        });
        
        document.getElementById('closeSingleModal').addEventListener('click', function() {
            document.getElementById('singleModal').style.display = 'none';
        });

        document.getElementById('mix1-package-increase').addEventListener('click', function() {
            mix1PackageCount++;
            updateMix1Display();
        });
        
        document.getElementById('mix1-package-decrease').addEventListener('click', function() {
            if (mix1PackageCount > 1) {
                mix1PackageCount--;
                updateMix1Display();
            }
        });

        document.getElementById('mix2-package-increase').addEventListener('click', function() {
            mix2PackageCount++;
            updateMix2Display();
        });
        
        document.getElementById('mix2-package-decrease').addEventListener('click', function() {
            if (mix2PackageCount > 1) {
                mix2PackageCount--;
                updateMix2Display();
            }
        });

        document.querySelectorAll('.mix1-increase').forEach(button => {
            button.addEventListener('click', function() {
                const type = this.getAttribute('data-type');
                mix1Selection[type].qty++;
                updateMix1Display();
            });
        });
        
        document.querySelectorAll('.mix1-decrease').forEach(button => {
            button.addEventListener('click', function() {
                const type = this.getAttribute('data-type');
                if (mix1Selection[type].qty > 0) {
                    mix1Selection[type].qty--;
                    updateMix1Display();
                }
            });
        });

        document.querySelectorAll('.mix2-increase').forEach(button => {
            button.addEventListener('click', function() {
                const type = this.getAttribute('data-type');
                mix2Selection[type].qty++;
                updateMix2Display();
            });
        });
        
        document.querySelectorAll('.mix2-decrease').forEach(button => {
            button.addEventListener('click', function() {
                const type = this.getAttribute('data-type');
                if (mix2Selection[type].qty > 0) {
                    mix2Selection[type].qty--;
                    updateMix2Display();
                }
            });
        });

        document.getElementById('single-increase').addEventListener('click', function() {
            singleItem.quantity++;
            document.getElementById('single-qty').value = singleItem.quantity;
            updateSinglePrice();
        });
        
        document.getElementById('single-decrease').addEventListener('click', function() {
            if (singleItem.quantity > 1) {
                singleItem.quantity--;
                document.getElementById('single-qty').value = singleItem.quantity;
                updateSinglePrice();
            }
        });

        document.getElementById('addMix1ToCart').addEventListener('click', function() {
            const totalPcs = mix1Selection.original.qty + mix1Selection.sosis.qty + mix1Selection.rawit.qty;
            const requiredPcs = mix1PackageCount * 8;
            
            if (totalPcs !== requiredPcs) {
                showNotification(`Total pcs lainnya harus tepat ${requiredPcs}!`);
                return;
            }
            
            const composition = {
                keju: { 
                    qty: mix1PackageCount * 2, 
                    processing: mix1Selection.keju.processing
                }
            };
            
            if (mix1Selection.original.qty > 0) {
                composition.original = { 
                    qty: mix1Selection.original.qty * mix1PackageCount, 
                    processing: mix1Selection.original.processing 
                };
            }
            if (mix1Selection.sosis.qty > 0) {
                composition.sosis = { 
                    qty: mix1Selection.sosis.qty * mix1PackageCount, 
                    processing: mix1Selection.sosis.processing 
                };
            }
            if (mix1Selection.rawit.qty > 0) {
                composition.rawit = { 
                    qty: mix1Selection.rawit.qty * mix1PackageCount, 
                    processing: mix1Selection.rawit.processing 
                };
            }
            
            addToCart('mix1', 'Mix 1', 30000, mix1PackageCount, '2 pcs keju + 8 pcs lainnya (pilih sendiri komposisinya)', composition, '');
            document.getElementById('mix1Modal').style.display = 'none';
            resetMix1Selection();
        });
        
        document.getElementById('addMix2ToCart').addEventListener('click', function() {
            const totalPcs = mix2Selection.original.qty + mix2Selection.sosis.qty + mix2Selection.rawit.qty;
            const requiredPcs = mix2PackageCount * 10;
            
            if (totalPcs !== requiredPcs) {
                showNotification(`Total pcs harus tepat ${requiredPcs}!`);
                return;
            }
            
            const composition = {};
            
            if (mix2Selection.original.qty > 0) {
                composition.original = { 
                    qty: mix2Selection.original.qty * mix2PackageCount, 
                    processing: mix2Selection.original.processing 
                };
            }
            if (mix2Selection.sosis.qty > 0) {
                composition.sosis = { 
                    qty: mix2Selection.sosis.qty * mix2PackageCount, 
                    processing: mix2Selection.sosis.processing 
                };
            }
            if (mix2Selection.rawit.qty > 0) {
                composition.rawit = { 
                    qty: mix2Selection.rawit.qty * mix2PackageCount, 
                    processing: mix2Selection.rawit.processing 
                };
            }
            
            addToCart('mix2', 'Mix 2', 28000, mix2PackageCount, '10 pcs campuran (original/sosis/rawit) tanpa keju', composition, '');
            document.getElementById('mix2Modal').style.display = 'none';
            resetMix2Selection();
        });
        
        document.getElementById('addSingleToCart').addEventListener('click', function() {
            if (singleItem.quantity < 1) {
                showNotification('Jumlah minimal 1 pcs!');
                return;
            }
            
            const processing = document.querySelector('input[name="single-processing"]:checked').value;
            
            addToCart(singleItem.id, singleItem.name, singleItem.price, singleItem.quantity, '', '', processing);
            document.getElementById('singleModal').style.display = 'none';
            singleItem.quantity = 1;
            document.getElementById('single-qty').value = '1';
        });

        window.addEventListener('click', function(event) {
            const modals = ['checkoutModal', 'mix1Modal', 'mix2Modal', 'singleModal', 'qrisModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // --- HAMBURGER MENU ---
const hamburger = document.getElementById("hamburgerMenu");
const navMenu = document.getElementById("mobileNav");

hamburger.addEventListener("click", ()=> mobileNav.classList.toggle("active"))
document.querySelectorAll(".nav-link").forEach(x => x.onclick=()=>mobileNav.classList.remove("active"))


    </script>
</body>
</html>